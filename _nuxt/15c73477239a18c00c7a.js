(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{342:function(e,n){const t={render:function(){this.$createElement;return this._self._c,this._m(0)},staticRenderFns:[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"frontmatter-markdown"},[t("h2",[e._v("æµã‚Œ")]),e._v(" "),t("ul",[t("li",[t("ol",[t("li",[e._v("CSRã‚’ä½œæˆã™ã‚‹")])])]),e._v(" "),t("li",[t("ol",{attrs:{start:"2"}},[t("li",[e._v("è¨¼æ˜æ›¸ç™ºè¡Œ")])])]),e._v(" "),t("li",[t("ol",{attrs:{start:"3"}},[t("li",[e._v("ã‚µãƒ¼ãƒãƒ¼è¨­å®š")])])])]),e._v(" "),t("h3",[e._v("1. CSRã‚’ä½œæˆã™ã‚‹")]),e._v(" "),t("p",[e._v("CSR (Certificate Signing Request)ã¯è¨¼æ˜æ›¸ç™ºè¡Œä¾é ¼æ›¸ã¨å‘¼ã°ã‚Œã€CA(Certificate authority)ã¸æå‡ºã™ã‚‹ã‚‚ã®ã€‚\nä½œæˆæ™‚ã«ä»¥ä¸‹ã®æƒ…å ±ãŒé‡è¦å‡ºãã†ã ã€‚")]),e._v(" "),t("ul",[t("li",[e._v("Common Name (eg, your name or your server's hostname)")]),e._v(" "),t("li",[e._v("Domain name or server's public IP address")])]),e._v(" "),t("h4",[e._v("1.1. Private Key(æ©Ÿå¯†éµ)ç™ºè¡Œ")]),e._v(" "),t("pre",{staticClass:"language-sh"},[t("code",{pre:!0,attrs:{class:"language-sh"}},[e._v("openssl genrsa -out /path/to/.key 2048\n")])]),e._v(" "),t("h4",[e._v("1.2. CSRç™ºè¡Œ (Certificate Signing Request)")]),e._v(" "),t("pre",{staticClass:"language-shell"},[t("code",{pre:!0,attrs:{class:"language-shell"}},[e._v("openssl req -new -key /path/to/.key -out /path/to/.csr\n")])]),e._v(" "),t("h4",[e._v("1.3. Private Keyã‹ã‚‰passphraseã‚’æ’é™¤ï¼ˆç„¡åŠ¹ï¼‰")]),e._v(" "),t("p",[t("code",{pre:!0},[e._v("Passphrase")]),e._v("ã‚’æœ‰åŠ¹ã«ã—ã¦ã„ã‚‹ã¨ã€ã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•ã—ãŸéš›ã€"),t("code",{pre:!0},[e._v("Private Key")]),e._v("ã‚’èªè¨¼ã™ã‚‹ç‚ºã€"),t("code",{pre:!0},[e._v("Passphrase")]),e._v("ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã®ã§ã€å…¥åŠ›å®Œäº†ã™ã‚‹ã¾ã§ã€\b"),t("code",{pre:!0},[e._v("Website")]),e._v("ã‚’ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã“ã¨ãŒã‚ã‚‹ã€‚")]),e._v(" "),t("pre",{staticClass:"language-sh"},[t("code",{pre:!0,attrs:{class:"language-sh"}},[e._v("cp server.key server.key.org\nopenssl rsa -in server.key.org -out server.key\n")])]),e._v(" "),t("h3",[e._v("2. è¨¼æ˜æ›¸å–å¾—")]),e._v(" "),t("p",[e._v("å®Ÿéš›ã¯CAã«ç™ºè¡Œã—ã¦ã‚‚ã‚‰ã†ãŒã€ãƒ†ã‚¹ãƒˆæ™‚ã¯è‡ªå·±ç½²åè¨¼æ˜æ›¸ã‚’ä½¿ç”¨ã™ã‚‹ã€‚\nã“ã®ãƒ†ã‚¹ãƒˆã®ã‚ˆã†ã®è¨¼æ˜æ›¸ã¯"),t("code",{pre:!0},[e._v("self-signed certificate")]),e._v("ã¨å‘¼ã°ã‚Œã‚‹ã€‚")]),e._v(" "),t("pre",{staticClass:"language-sh"},[t("code",{pre:!0,attrs:{class:"language-sh"}},[e._v("openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt\n")])]),e._v(" "),t("p",[t("strong",[e._v("ğŸ‘‰"),t("code",{pre:!0},[e._v("self-signed certificate")]),e._v("ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§CSRç™ºè¡Œã›ãšã«ã€ç›´æ¥è¨¼æ˜æ›¸ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹")])]),e._v(" "),t("pre",{staticClass:"language-sh"},[t("code",{pre:!0,attrs:{class:"language-sh"}},[e._v("sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/apache-selfsigned.key -out /etc/ssl/certs/apache-selfsigned.crt\n")])]),e._v(" "),t("ul",[t("li",[e._v("req: X509ã«ã‚ˆã‚ŠCSRä½œæˆ")]),e._v(" "),t("li",[e._v("x509: "),t("code",{pre:!0},[e._v("self-signed")]),e._v("èªè¨¼ç™ºè¡Œã™ã‚‹æŒ‡ç¤º")]),e._v(" "),t("li",[e._v("nodes: "),t("code",{pre:!0},[e._v("passphrase")]),e._v("ã‚’ä½¿ç”¨ã—ãªã„")]),e._v(" "),t("li",[e._v("days 365: æœ‰åŠ¹æœŸé™ï¼ˆï¼‘å¹´ï¼‰")]),e._v(" "),t("li",[e._v("newkey rsa:2048é•·ãƒ“ãƒƒãƒˆã®keyã¨è¨¼æ˜æ›¸åŒæ™‚ã«ç™ºè¡Œã€‚(rsa key with 2048 bits long)")]),e._v(" "),t("li",[e._v("keyout: private keyã®ä½œæˆå ´æ‰€")]),e._v(" "),t("li",[e._v("out: è¨¼æ˜æ›¸ã®ç½®ãå ´æ‰€")])]),e._v(" "),t("h3",[e._v("3. ã‚µãƒ¼ãƒãƒ¼è¨­å®š")]),e._v(" "),t("h4",[e._v("3.1. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¿®æ­£")]),e._v(" "),t("p",[t("strong",[e._v("/etc/httpd/conf.d/ssl.conf")])]),e._v(" "),t("pre",{staticClass:"language-sh"},[t("code",{pre:!0,attrs:{class:"language-sh"}},[e._v("# ãƒ—ãƒ­ãƒˆã‚³ãƒ«\nSSLProtocol -All +TLSv1 +TLSv1.1 +TLSv1.2\n\n# è¨¼æ˜æ›¸æŒ‡\nSSLCertificateFile path/to/.crt\n\n# éµãƒ•ã‚¡ã‚¤ãƒ«æŒ‡å®š\nSSLCertificateKeyFile /path/to/.key\n")])]),e._v(" "),t("h4",[e._v("3.2. firewall è¨­å®š")]),e._v(" "),t("p",[t("code",{pre:!0},[e._v("https")]),e._v("ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã™ã‚‹")]),e._v(" "),t("pre",{staticClass:"language-sh"},[t("code",{pre:!0,attrs:{class:"language-sh"}},[e._v("firewall-cmd --add-service=https --permanent\nfirewall-cmd --reload\n")])])])}]};e.exports={attributes:{title:"Linuxã«ã‚µãƒ¼ãƒãƒ¼ã‚’æ§‹ç¯‰ã—ã¦ã¿ã‚‹",description:"Linuxã«Apacheä¸Šã®è‡ªå·±è¨¼æ˜HTTPSã‚µãƒ¼ãƒãƒ¼æ§‹ç¯‰ã—ãŸãƒ¡ãƒ¢ã§ã™ã€‚",thumbnail:"posts/https.jpg",date:"2017-11-02T13:29:47.000Z",tags:["linux","apache","https"]},html:'<h2>æµã‚Œ</h2>\n<ul>\n<li>\n<ol>\n<li>CSRã‚’ä½œæˆã™ã‚‹</li>\n</ol>\n</li>\n<li>\n<ol start="2">\n<li>è¨¼æ˜æ›¸ç™ºè¡Œ</li>\n</ol>\n</li>\n<li>\n<ol start="3">\n<li>ã‚µãƒ¼ãƒãƒ¼è¨­å®š</li>\n</ol>\n</li>\n</ul>\n<h3>1. CSRã‚’ä½œæˆã™ã‚‹</h3>\n<p>CSR (Certificate Signing Request)ã¯è¨¼æ˜æ›¸ç™ºè¡Œä¾é ¼æ›¸ã¨å‘¼ã°ã‚Œã€CA(Certificate authority)ã¸æå‡ºã™ã‚‹ã‚‚ã®ã€‚\nä½œæˆæ™‚ã«ä»¥ä¸‹ã®æƒ…å ±ãŒé‡è¦å‡ºãã†ã ã€‚</p>\n<ul>\n<li>Common Name (eg, your name or your server\'s hostname)</li>\n<li>Domain name or server\'s public IP address</li>\n</ul>\n<h4>1.1. Private Key(æ©Ÿå¯†éµ)ç™ºè¡Œ</h4>\n<pre class="language-sh"><code class="language-sh">openssl genrsa -out /path/to/.key 2048\n</code></pre>\n<h4>1.2. CSRç™ºè¡Œ (Certificate Signing Request)</h4>\n<pre class="language-shell"><code class="language-shell">openssl req -new -key /path/to/.key -out /path/to/.csr\n</code></pre>\n<h4>1.3. Private Keyã‹ã‚‰passphraseã‚’æ’é™¤ï¼ˆç„¡åŠ¹ï¼‰</h4>\n<p><code>Passphrase</code>ã‚’æœ‰åŠ¹ã«ã—ã¦ã„ã‚‹ã¨ã€ã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•ã—ãŸéš›ã€<code>Private Key</code>ã‚’èªè¨¼ã™ã‚‹ç‚ºã€<code>Passphrase</code>ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã®ã§ã€å…¥åŠ›å®Œäº†ã™ã‚‹ã¾ã§ã€\b<code>Website</code>ã‚’ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã“ã¨ãŒã‚ã‚‹ã€‚</p>\n<pre class="language-sh"><code class="language-sh">cp server.key server.key.org\nopenssl rsa -in server.key.org -out server.key\n</code></pre>\n<h3>2. è¨¼æ˜æ›¸å–å¾—</h3>\n<p>å®Ÿéš›ã¯CAã«ç™ºè¡Œã—ã¦ã‚‚ã‚‰ã†ãŒã€ãƒ†ã‚¹ãƒˆæ™‚ã¯è‡ªå·±ç½²åè¨¼æ˜æ›¸ã‚’ä½¿ç”¨ã™ã‚‹ã€‚\nã“ã®ãƒ†ã‚¹ãƒˆã®ã‚ˆã†ã®è¨¼æ˜æ›¸ã¯<code>self-signed certificate</code>ã¨å‘¼ã°ã‚Œã‚‹ã€‚</p>\n<pre class="language-sh"><code class="language-sh">openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt\n</code></pre>\n<p><strong>ğŸ‘‰<code>self-signed certificate</code>ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§CSRç™ºè¡Œã›ãšã«ã€ç›´æ¥è¨¼æ˜æ›¸ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹</strong></p>\n<pre class="language-sh"><code class="language-sh">sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/apache-selfsigned.key -out /etc/ssl/certs/apache-selfsigned.crt\n</code></pre>\n<ul>\n<li>req: X509ã«ã‚ˆã‚ŠCSRä½œæˆ</li>\n<li>x509: <code>self-signed</code>èªè¨¼ç™ºè¡Œã™ã‚‹æŒ‡ç¤º</li>\n<li>nodes: <code>passphrase</code>ã‚’ä½¿ç”¨ã—ãªã„</li>\n<li>days 365: æœ‰åŠ¹æœŸé™ï¼ˆï¼‘å¹´ï¼‰</li>\n<li>newkey rsa:2048é•·ãƒ“ãƒƒãƒˆã®keyã¨è¨¼æ˜æ›¸åŒæ™‚ã«ç™ºè¡Œã€‚(rsa key with 2048 bits long)</li>\n<li>keyout: private keyã®ä½œæˆå ´æ‰€</li>\n<li>out: è¨¼æ˜æ›¸ã®ç½®ãå ´æ‰€</li>\n</ul>\n<h3>3. ã‚µãƒ¼ãƒãƒ¼è¨­å®š</h3>\n<h4>3.1. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¿®æ­£</h4>\n<p><strong>/etc/httpd/conf.d/ssl.conf</strong></p>\n<pre class="language-sh"><code class="language-sh"># ãƒ—ãƒ­ãƒˆã‚³ãƒ«\nSSLProtocol -All +TLSv1 +TLSv1.1 +TLSv1.2\n\n# è¨¼æ˜æ›¸æŒ‡\nSSLCertificateFile path/to/.crt\n\n# éµãƒ•ã‚¡ã‚¤ãƒ«æŒ‡å®š\nSSLCertificateKeyFile /path/to/.key\n</code></pre>\n<h4>3.2. firewall è¨­å®š</h4>\n<p><code>https</code>ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã™ã‚‹</p>\n<pre class="language-sh"><code class="language-sh">firewall-cmd --add-service=https --permanent\nfirewall-cmd --reload\n</code></pre>\n',meta:{resourcePath:"/Volumes/Data/github.com/thanhchungbtc/myblog/content/centos-apache-https-server/index.md"},vue:{component:{data:function(){return{templateRender:null}},render:function(e){return this.templateRender?this.templateRender():e("div","Rendering")},created:function(){this.templateRender=t.render,this.$options.staticRenderFns=t.staticRenderFns}}}}}}]);